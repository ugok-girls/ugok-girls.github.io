var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let g;function b(t){g=t}function k(){if(!g)throw new Error("Function called outside component initialization");return g}const w=[],v=[],_=[],y=[],$=Promise.resolve();let x=!1;function N(t){_.push(t)}let T=!1;const G=new Set;function j(){if(!T){T=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];b(e),C(e.$$)}for(b(null),w.length=0;v.length;)v.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];G.has(e)||(G.add(e),e())}_.length=0}while(w.length);for(;y.length;)y.pop()();x=!1,T=!1,G.clear()}}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const E=new Set;let L;function U(t,e){t&&t.i&&(E.delete(t),t.i(e))}function O(t,e){const n=e.token={};function r(t,r,s,c){if(e.token!==n)return;e.resolved=c;let l=e.ctx;void 0!==s&&(l=l.slice(),l[s]=c);const a=t&&(e.current=t)(l);let i=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(L={r:0,c:[],p:L},function(t,e,n,o){if(t&&t.o){if(E.has(t))return;E.add(t),L.c.push((()=>{E.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),L.r||o(L.c),L=L.p)})):e.block.d(1),a.c(),U(a,1),a.m(e.mount(),e.anchor),i=!0),e.block=a,e.blocks&&(e.blocks[r]=a),i&&j()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=k();if(t.then((t=>{b(n),r(e.then,1,e.value,t),b(null)}),(t=>{if(b(n),r(e.catch,2,e.error,t),b(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var s}function M(t,e){t.d(1),e.delete(t.key)}function A(t,e){-1===t.$$.dirty[0]&&(w.push(t),x||(x=!0,$.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(s,c,l,i,u,f,d=[-1]){const h=g;b(s);const p=s.$$={fragment:null,ctx:null,props:f,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:d,skip_bound:!1};let m=!1;if(p.ctx=l?l(s,c.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return p.ctx&&u(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&A(s,t)),e})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();c.intro&&U(s.$$.fragment),function(t,n,s){const{fragment:c,on_mount:l,on_destroy:a,after_update:i}=t.$$;c&&c.m(n,s),N((()=>{const n=l.map(e).filter(r);a?a.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(N)}(s,c.target,c.anchor),j()}b(h)}function K(t,e,n){const o=t.slice();return o[8]=e[n],o}function W(t){let e,n,o=t[11].message+"";return{c(){e=i("p"),n=u(o),m(e,"color","red")},m(t,o){l(t,e,o),c(e,n)},p(t,e){1&e&&o!==(o=t[11].message+"")&&p(n,o)},d(t){t&&a(e)}}}function B(t){let e,n,r,s,u,p,g,b,k,w,v,_,y,$,x,N,T=[],G=new Map;function j(){return t[1](t[7])}function C(){return t[2](t[7])}function E(){return t[3](t[7])}function L(){return t[4](t[7])}let O=t[7];const A=t=>t[8].userName;for(let e=0;e<O.length;e+=1){let n=K(t,O,e),o=A(n);G.set(o,T[e]=S(o,n))}return{c(){e=i("div"),n=i("h1"),n.innerHTML='UGOK Twitter発信状況一覧<br/><span style="font-size:small">（第1ステージ 10/4～10/24）</span>',r=f(),s=i("div"),u=i("button"),u.textContent="ツイート数",p=f(),g=i("button"),g.textContent="いいね数",b=f(),k=i("button"),k.textContent="コメント数",w=f(),v=i("button"),v.textContent="RT数",_=f();for(let t=0;t<T.length;t+=1)T[t].c();y=f(),$=i("footer"),$.textContent="— UGOK Project since 2017 —",m(n,"text-align","center"),h(n,"class","svelte-a6b764"),h(u,"class","svelte-a6b764"),h(g,"class","svelte-a6b764"),h(k,"class","svelte-a6b764"),h(v,"class","svelte-a6b764"),h(s,"class","btn svelte-a6b764"),h(e,"id","ranking"),h($,"class","svelte-a6b764")},m(t,o){l(t,e,o),c(e,n),c(e,r),c(e,s),c(s,u),c(s,p),c(s,g),c(s,b),c(s,k),c(s,w),c(s,v),c(e,_);for(let t=0;t<T.length;t+=1)T[t].m(e,null);l(t,y,o),l(t,$,o),x||(N=[d(u,"click",j),d(g,"click",C),d(k,"click",E),d(v,"click",L)],x=!0)},p(n,o){t=n,1&o&&(O=t[7],T=function(t,e,n,o,r,s,c,l,a,i,u,f){let d=t.length,h=s.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const g=[],b=new Map,k=new Map;for(p=h;p--;){const t=f(r,s,p),l=n(t);let a=c.get(l);a?o&&a.p(t,e):(a=i(l,t),a.c()),b.set(l,g[p]=a),l in m&&k.set(l,Math.abs(p-m[l]))}const w=new Set,v=new Set;function _(t){U(t,1),t.m(l,u),c.set(t.key,t),u=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],o=e.key,r=n.key;e===n?(u=e.first,d--,h--):b.has(r)?!c.has(o)||w.has(o)?_(e):v.has(r)?d--:k.get(o)>k.get(r)?(v.add(o),_(e)):(w.add(r),d--):(a(n,c),d--)}for(;d--;){const e=t[d];b.has(e.key)||a(e,c)}for(;h;)_(g[h-1]);return g}(T,o,A,1,t,O,G,e,M,S,null,K))},d(t){t&&a(e);for(let t=0;t<T.length;t+=1)T[t].d();t&&a(y),t&&a($),x=!1,o(N)}}}function S(t,e){let n,o,r,s,d,m,g,b,k,w,v,_,y,$,x,N,T,G,j,C,E,L,U,O,M,A,D,K,W,B,S=e[8].screenName+"",H=e[8].nTweets+"",P=e[8].likes+"",R=e[8].replies+"",z=e[8].retweets+"";return{key:t,first:null,c(){n=i("div"),o=i("div"),r=i("div"),s=i("a"),d=i("img"),b=f(),k=i("p"),w=u(S),v=f(),_=i("div"),y=i("div"),$=u(" "),x=u(H),N=u(" ツイート"),T=i("br"),G=u("\n                 "),j=u(P),C=u(" いいね"),E=i("br"),L=u("\n                 "),U=u(R),O=u(" コメント"),M=i("br"),A=u("\n                 "),D=u(z),K=u(" RT"),W=i("br"),B=f(),d.src!==(m=e[8].iconUrl)&&h(d,"src",m),h(d,"alt","プロフィール画像"),h(s,"href",g="https://twitter.com/"+e[8].userName),h(k,"class","svelte-a6b764"),h(r,"class","profile svelte-a6b764"),h(y,"class","twData svelte-a6b764"),h(_,"class","snsData svelte-a6b764"),h(o,"class","card svelte-a6b764"),h(n,"class","record svelte-a6b764"),this.first=n},m(t,e){l(t,n,e),c(n,o),c(o,r),c(r,s),c(s,d),c(r,b),c(r,k),c(k,w),c(o,v),c(o,_),c(_,y),c(y,$),c(y,x),c(y,N),c(y,T),c(y,G),c(y,j),c(y,C),c(y,E),c(y,L),c(y,U),c(y,O),c(y,M),c(y,A),c(y,D),c(y,K),c(y,W),c(n,B)},p(t,n){e=t,1&n&&d.src!==(m=e[8].iconUrl)&&h(d,"src",m),1&n&&g!==(g="https://twitter.com/"+e[8].userName)&&h(s,"href",g),1&n&&S!==(S=e[8].screenName+"")&&p(w,S),1&n&&H!==(H=e[8].nTweets+"")&&p(x,H),1&n&&P!==(P=e[8].likes+"")&&p(j,P),1&n&&R!==(R=e[8].replies+"")&&p(U,R),1&n&&z!==(z=e[8].retweets+"")&&p(D,z)},d(t){t&&a(n)}}}function H(e){let n;return{c(){n=i("div"),n.innerHTML='<div class="spinner svelte-a6b764"></div>',h(n,"id","loading"),h(n,"class","svelte-a6b764")},m(t,e){l(t,n,e)},p:t,d(t){t&&a(n)}}}function P(e){let n,o,r,s,u,d,p,m={ctx:e,current:null,token:null,hasCatch:!0,pending:H,then:B,catch:W,value:7,error:11};return O(p=e[0],m),{c(){n=i("html"),o=i("script"),s=i("script"),s.textContent="window.dataLayer = window.dataLayer || [];\n    function gtag() {\n      dataLayer.push(arguments);\n    }\n    gtag('js', new Date());\n\n    gtag('config', 'G-1BWG4DW92L');",u=f(),d=i("main"),m.block.c(),document.title="Twitter発信状況一覧サイト",h(n,"lang","ja"),o.async=!0,o.src!==(r="https://www.googletagmanager.com/gtag/js?id=G-1BWG4DW92L")&&h(o,"src","https://www.googletagmanager.com/gtag/js?id=G-1BWG4DW92L"),h(d,"class","svelte-a6b764")},m(t,e){c(document.head,n),c(document.head,o),c(document.head,s),l(t,u,e),l(t,d,e),m.block.m(d,m.anchor=null),m.mount=()=>d,m.anchor=null},p(t,[n]){if(e=t,m.ctx=e,1&n&&p!==(p=e[0])&&O(p,m));else{const t=e.slice();t[7]=t[11]=m.resolved,m.block.p(t,n)}},i:t,o:t,d(t){a(n),a(o),a(s),t&&a(u),t&&a(d),m.block.d(),m.token=null,m=null}}}function R(t,e,n){const o=["UGOK_5563","usagi_UGOK","AyA3156_ugok","kumi_UGOK","ms_UGOK","yuria_ugok","misk_ugok","mami_ugok","0024_ugok","haru_ugok","natsu_ugok","sakumwu","HMDKN_5A"];let r=async function(){const t=[],e=/^RT\s.+:/;for(const n of o){const o="https://ugok-twitter-status.deno.dev/?member="+n,r=await fetch(o,{mode:"cors"});if(!r.ok)throw new Error(r);{const n=await r.json();if("success"!==n.status)throw new Error(n);{const o=n.record;let r=0,s=0,c=0,l=0;for(const t of o.tweets){if(t.text.match(e))continue;r+=1;const n=t.public_metrics;s+=n.like_count,c+=n.retweet_count,l+=n.reply_count,t.in_reply_to_user_id&&t.in_reply_to_user_id===t.author_id&&(l-=1)}t.push({userName:o.userName,screenName:o.screenName,iconUrl:o.iconUrl,nTweets:r,likes:s,retweets:c,replies:l})}}}return t.sort(((t,e)=>t.screenName.localeCompare(e.screenName)),"ja")}();return[r,t=>{t.sort(((t,e)=>e.nTweets-t.nTweets)),n(0,r)},t=>{t.sort(((t,e)=>e.likes-t.likes)),n(0,r)},t=>{t.sort(((t,e)=>e.replies-t.replies)),n(0,r)},t=>{t.sort(((t,e)=>e.retweets-t.retweets)),n(0,r)}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),D(this,t,R,P,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
